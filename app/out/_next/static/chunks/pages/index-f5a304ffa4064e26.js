(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4483)}])},4483:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var n=s(5893),a=s(7294);function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}var d=s(7191);let i=e=>l([],(0,d.Qc)(e,{sourceType:"module",plugins:["jsx","typescript"]}).program.body.find(e=>"ExportDefaultDeclaration"===e.type).declaration.body.body[0].argument)[0],l=(e,t)=>{let s={};return"JSXElement"===t.type&&(s={id:o().slice(0,8)+"-"+t.openingElement.name.name,name:t.openingElement.name.name,children:[]},e.push(s)),"children"in t&&t.children.forEach(t=>{e.length>0?l(s.children,t):l(e,t)}),e},r=e=>{let t,s;let n=u(c(e));return{initialNodes:(t=[],function e(s){let n={id:s.id||s.name,data:{...s.data,style:{bgColor:s.data.style.bgColor,color:"#ff0072"===s.data.style.bgColor?"white":"black"}},position:{x:0,y:0},type:(s.data.initialNodes.length,"custom")};t.push(n),s.children.length>0&&s.children.forEach(t=>{e(t)})}(n),t),initialEdges:(s=[],function e(t){let n=t.id||t.name;t.children.length>0&&t.children.forEach(t=>{let a=t.id||t.name,o={id:"e-".concat(n,"-TO-").concat(a),source:n,target:a,animated:!1};s.push(o),e(t)})}(n),s)}},c=e=>e.map(e=>{let t,s;let n=i(e.content),a=(t=[],!function e(s){let n={id:s.id||s.name,data:{label:s.name},position:{x:0,y:0}};t.push(n),s.children.length>0&&s.children.forEach(t=>{e(t)})}(n),t),o=(s=[],!function e(t){let n=t.id||t.name;t.children.length>0&&t.children.forEach(t=>{let a=t.id||t.name,o={id:"e-".concat(n,"-TO-").concat(a),source:n,target:a,animated:!1};s.push(o),e(t)})}(n),s);return{name:e.name,path:e.path,content:e.content,nodes:a,edges:o}}),u=e=>{let t=function(e){let t=e.lastIndexOf("/");return e.substring(0,t)}(e[0].path),s=o().slice(0,6)+"-root",n={id:s,name:"root",path:"",url:"",children:[],data:{id:s,label:"/",fileName:"",initialNodes:[],initialEdges:[],isShowComponents:!1,style:{color:"black",bgColor:"white"},componentsViewBounds:void 0,isLeaf:!1}};return e.forEach(s=>{let a=s.path.split("/").slice(2),d=n;a.forEach((s,n)=>{if(""!==s&&"_"!==s[0]){let r=d.children.find(e=>e.name===s);if(!r){var i,l;let c="".concat(o().slice(0,6),"-").concat(s),u=e.find(e=>e.path===t+"/"+a.slice(0,n+1).join("/"));u&&console.log("lookupnode exist for",c),r={id:c,name:s,url:"/"+p(s),path:t+a.slice(0,n+1).join("/"),data:{id:c,fileName:s,initialNodes:u?u.nodes:[],initialEdges:u?u.edges:[],label:(i=s,("/"===(l=d.data.label)&&(l=""),"index.tsx"===i&&(i="",""!==l))?l:l+"/"+p(i)),style:{color:"black",bgColor:"white"},isShowComponents:!1,componentsViewBounds:void 0,isLeaf:!!h(s)},children:[]},d.children.push(r)}d=r}})}),n},h=e=>e.endsWith(".tsx");function p(e){return e.endsWith(".tsx")?e.slice(0,-4):e}var m=s(6851),g=s(3445);let x=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,setNodes:e.setNodes,setEdges:e.setEdges,isLayouted:e.isLayouted,setIsLayouted:e.setIsLayouted,viewType:e.viewType,selectedNode:e.selectedNode,setNodeViewToComponents:e.setNodeViewToComponents,setNodeViewToRoute:e.setNodeViewToRoute,setSelectedNode:e.setSelectedNode,setAllRoute:e.setAllRoute,setAllComponents:e.setAllComponents,focusId:e.focusId,setFocusId:e.setFocusId,setSelectedNodeId:e.setSelectedNode}),f=(0,g.Ue)((e,t)=>({nodes:[],edges:[],onNodesChange:s=>{e({nodes:(0,m.Fb)(s,t().nodes)})},onEdgesChange:s=>{e({edges:(0,m.yn)(s,t().edges)})},onConnect:s=>{e({edges:(0,m.Z_)(s,t().edges)})},setNodes:t=>{e({nodes:t})},setEdges:t=>{e({edges:t})},isLayouted:!1,setIsLayouted:t=>{e({isLayouted:t})},viewType:"route",setViewType:t=>{e({viewType:t})},setNodeViewToComponents:s=>{e({nodes:t().nodes.map(e=>e.id===s?(e.data={...e.data,isShowComponents:!0},e.position.x=0,e.position.y=0,{...e,width:2,height:2}):(e.position.x=0,e.position.y=0,e))})},setNodeViewToRoute:s=>{e({nodes:t().nodes.map(e=>e.id===s?(e.data={...e.data,isShowComponents:!1},e.position.x=0,e.position.y=0,{...e,width:150,height:40}):(e.position.x=0,e.position.y=0,e))})},selectedNode:void 0,setSelectedNode:s=>{e({selectedNode:t().nodes.find(e=>e.id===s)})},setComponentsViewBounds:(s,n)=>{e({nodes:t().nodes.map(e=>e.id===s?(e.data={...e.data,componentsViewBounds:n},console.log("set bounds for",e.id,"to",n),{...e}):e)})},rawFile:[],setRawFile:t=>{e({rawFile:t})},setAllRoute:()=>{e({nodes:t().nodes.map(e=>(e.data={...e.data,isShowComponents:!1},e))})},setAllComponents:()=>{e({nodes:t().nodes.map(e=>(e.data.isLeaf&&(e.data={...e.data,isShowComponents:!0}),e))})},focusId:void 0,setFocusId:t=>{e({focusId:t})}}));var b=s(7893),v=s.n(b);s(6793);let w={backgroundColor:"#B8CEFF"},N=e=>{let t=new(v()).graphlib.Graph().setDefaultEdgeLabel(()=>({})),s=(e,s,n)=>(t.setGraph({rankdir:n.direction}),s.forEach(e=>t.setEdge(e.source,e.target)),e.forEach(e=>t.setNode(e.id,e)),v().layout(t),{nodes:e.map(e=>{let{x:s,y:n}=t.node(e.id);return{...e,position:{x:s,y:n}}}),edges:s}),{fitView:o}=(0,m._K)(),[d,i,l]=(0,m.Rr)(e.data.initialNodes),[r,c,u]=(0,m.ll)(e.data.initialEdges),[h,p]=(0,a.useState)(!1),g=(0,m.RX)(d),x=f(e=>e.setComponentsViewBounds);return(0,a.useEffect)(()=>{0!==g.width&&0!==g.height&&h&&(e.setBounds(g),x(e.data.id,g))},[d]),(0,a.useCallback)(e=>{let t=s(d,r,{direction:e});i([...t.nodes]),c([...t.edges])},[d,r]),(0,a.useEffect)(()=>{if(!h){let{nodes:e,edges:t}=s(d,r,{direction:"TB"});i([...e]),c([...t]),d.every(e=>e.width)&&p(!0)}},[d,r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-white rounded-t pl-2",children:(0,n.jsx)("p",{children:e.data.label})}),(0,n.jsx)(m.tV,{children:(0,n.jsx)("div",{style:{height:e.bounds.height+2*e.bounds.y,width:e.bounds.width+2*e.bounds.x},children:(0,n.jsx)(m.x$,{nodesDraggable:!1,panOnDrag:!1,nodes:d,edges:r,onNodesChange:l,onEdgesChange:u,style:w})})})]})};var y=function(e){return(0,n.jsxs)("div",{style:{height:e.bounds.height+2*e.bounds.y,width:e.bounds.width+2*e.bounds.x},onClick:e.handleClick,children:[(0,n.jsx)(m.HH,{type:"target",position:m.Ly.Top,id:"target"}),(0,n.jsx)(N,{...e}),(0,n.jsx)(m.HH,{type:"source",position:m.Ly.Bottom,id:"source"})]})},j=e=>(f(e=>e.setComponentsViewBounds),(0,n.jsxs)("div",{style:{border:"1px solid #1a192b",padding:"10px",borderRadius:"3px",background:e.data.style.bgColor,width:e.bounds.width,height:e.bounds.height,textAlign:"center"},onClick:e.handleClick,children:[(0,n.jsx)(m.HH,{type:"target",position:m.Ly.Top}),(0,n.jsx)("p",{children:e.data.label}),(0,n.jsx)(m.HH,{type:"source",position:m.Ly.Bottom})]}));function C(e){let t=f(e=>e.setSelectedNode);f(e=>e.selectedNode);let[s,o]=(0,a.useState)({x:0,y:0,width:150,height:40});f(e=>e.setIsLayouted);let d=()=>{t(e.data.id)};f(e=>e.setComponentsViewBounds),(0,a.useEffect)(()=>{!1===e.data.isShowComponents&&o(e=>({...e,width:150,height:40}))},[e.data.isShowComponents]);let i=(0,n.jsx)(j,{bounds:s,setBounds:o,data:e.data,handleClick:d}),l=(0,n.jsx)(y,{data:e.data,bounds:s,setBounds:o,handleClick:d});return(0,n.jsx)(n.Fragment,{children:e.data.isShowComponents?l:i})}var k=s(7295),E=s.n(k),V=s(2010),S=s(4384),B=s(512),T=s(8388);function L(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,T.m6)((0,B.W)(t))}var R=s(3083),_=s(5139);let I=(0,_.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 hover:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-slate-100 data-[state=on]:text-slate-900 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-400 dark:focus-visible:ring-slate-300 dark:data-[state=on]:bg-slate-800 dark:data-[state=on]:text-slate-50",{variants:{variant:{default:"bg-transparent",outline:"border border-slate-200 bg-transparent hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:hover:bg-slate-800 dark:hover:text-slate-50"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,...d}=e;return(0,n.jsx)(R.f,{ref:t,className:L(I({variant:a,size:o,className:s})),...d})}).displayName=R.f.displayName;let F=a.createContext({size:"default",variant:"default"}),O=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,children:d,...i}=e;return(0,n.jsx)(S.fC,{ref:t,className:L("flex items-center justify-center gap-1",s),...i,children:(0,n.jsx)(F.Provider,{value:{variant:a,size:o},children:d})})});O.displayName=S.fC.displayName;let A=a.forwardRef((e,t)=>{let{className:s,children:o,variant:d,size:i,...l}=e,r=a.useContext(F);return(0,n.jsx)(S.ck,{ref:t,className:L(I({variant:r.variant||d,size:r.size||i}),s),...l,children:o})});A.displayName=S.ck.displayName;var H=s(8426);let z=(0,_.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:d=!1,...i}=e,l=d?H.g7:"button";return(0,n.jsx)(l,{className:L(z({variant:a,size:o,className:s})),ref:t,...i})});D.displayName="Button";var P=e=>{var t;let{selectedNode:s,setNodeViewToComponents:a,setNodeViewToRoute:o,setSelectedNode:d,setIsLayouted:i,isLayouted:l,setAllRoute:r,setAllComponents:c,setFocusId:u,nodes:h,setSelectedNodeId:p}=f((0,V.N)(x)),m=e=>{u(e)},g=e=>{m(e),p(e)};return(0,n.jsxs)("div",{className:"flex flex-col h-[100vh] w-[300px] bg-white p-4",children:[(0,n.jsxs)("div",{className:"border border-gray-300 rounded-md p-4",children:[(0,n.jsx)("p",{className:"text-center",children:"Global Options"}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"font-semibold",children:"View Type:"}),(0,n.jsxs)("div",{className:"flex gap-x-3 mt-1",children:[(0,n.jsx)(D,{variant:"outline",className:"w-1/2",onClick:()=>{r(),i(!1)},children:"Route"}),(0,n.jsx)(D,{variant:"outline",className:"w-1/2",onClick:()=>{c(),i(!1)},children:"Component"})]})]})]}),(0,n.jsxs)("div",{className:"border border-gray-300 rounded-md p-4 mt-4",children:[(0,n.jsx)("p",{className:"text-center",children:"Selected Node Options"}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Node Name:"}),(0,n.jsx)("p",{children:null!==(t=null==s?void 0:s.data.label)&&void 0!==t?t:"None"})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("p",{className:"font-semibold",children:"View Type:"}),s?(0,n.jsxs)(O,{size:"sm",type:"single",className:"mt-1 flex gap-x-3 ".concat(s.data.isLeaf?"":"justify-start"),variant:"outline",value:s.data.isShowComponents?"component":"route",onValueChange:e=>{"route"==e?o(null==s?void 0:s.data.id):"component"==e&&a(null==s?void 0:s.data.id),d(s.id),i(!1)},children:[(0,n.jsx)(A,{value:"route",className:"w-1/2","aria-label":"Toggle route",children:(0,n.jsx)("p",{children:"Route"})}),s.data.isLeaf&&(0,n.jsx)(A,{value:"component",className:"w-1/2","aria-label":"Toggle component",children:(0,n.jsx)("p",{children:"Component"})})]}):(0,n.jsx)("p",{children:"None"})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Action:"}),(0,n.jsx)(D,{size:"sm",className:"mt-1",onClick:()=>m(s?s.data.id:null),children:"Focus"})]})]}),(0,n.jsxs)("div",{className:"border border-gray-300 rounded-md p-4 mt-4 flex-1 overflow-auto",children:[(0,n.jsx)("p",{className:"text-center",children:"Available Routes"}),(0,n.jsx)("div",{className:"mt-4 flex flex-col gap-y-3",children:h.map(e=>(0,n.jsx)(D,{variant:"outline",onClick:()=>g(e.data.id),children:(0,n.jsx)("p",{className:"text-left w-full",children:e.data.label})}))})]})]})};let W={"elk.algorithm":"layered","elk.layered.spacing.nodeNodeBetweenLayers":100,"elk.spacing.nodeNode":80,"elk.hierarchyHandling":"INCLUDE_CHILDREN","elk.layered.nodePlacement.strategy":"NETWORK_SIMPLEX","elk.direction":"DOWN"};function X(e){let t=new(E()),s=(0,a.useMemo)(()=>({custom:C}),[]),{nodes:o,edges:d,onNodesChange:i,onEdgesChange:l,setNodes:r,setEdges:c,isLayouted:u,setIsLayouted:h,viewType:p,focusId:g,setFocusId:b}=f((0,V.N)(x)),{fitView:v}=(0,m._K)(),w=(e,t,s,n)=>{let a={id:"graph",layoutOptions:W,children:t.map(e=>{if(!e.data.isShowComponents)return{...e,width:150,height:40};if(e.data.componentsViewBounds){let t=e.data.componentsViewBounds.x,s=e.data.componentsViewBounds.y,n=e.data.componentsViewBounds.width,a=e.data.componentsViewBounds.height;return{...e,width:n+2*t,height:a+2*s}}return e}),edges:s};e.layout(a,{layoutOptions:{"elk.alignment":"TOP"}}).then(e=>{let{children:t}=e;null==t||t.forEach(e=>{e.position={x:e.x,y:e.y}}),t&&n(t),window.requestAnimationFrame(()=>{v()})})};return(0,a.useEffect)(()=>{!u&&o.length>1&&d.length>1&&(w(t,o,d,r),o.filter(e=>e.data.isShowComponents&&e.data.isLeaf).every(e=>{var t,s,n,a;return e.data.componentsViewBounds&&e.width===(null===(t=e.data.componentsViewBounds)||void 0===t?void 0:t.width)+2*(null===(s=e.data.componentsViewBounds)||void 0===s?void 0:s.x)&&e.height===(null===(n=e.data.componentsViewBounds)||void 0===n?void 0:n.height)+2*(null===(a=e.data.componentsViewBounds)||void 0===a?void 0:a.y)})&&h(!0))},[o,d]),(0,a.useEffect)(()=>{g&&(v({nodes:[{id:g}],duration:500}),b(null))},[g,v]),(0,n.jsxs)("div",{className:"h-[100vh] w-[calc(100vw - 300px] flex",children:[(0,n.jsx)(P,{}),(0,n.jsx)(m.x$,{nodes:o,edges:d,onNodesChange:i,onEdgesChange:l,nodeTypes:s,minZoom:.1,style:{background:"#008080"}})]})}function G(e){return(0,n.jsx)(m.tV,{children:(0,n.jsx)(X,{})})}let K=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setRawFile:e.setRawFile});function M(){let{setNodes:e,setEdges:t,setRawFile:s}=f((0,V.N)(K)),[o,d]=(0,a.useState)("route"),[i,l]=(0,a.useState)({initialNodes:[],initialEdges:[]}),[c,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let n=!1;return(async()=>{let a=await fetch("http://localhost:3010/raw-file"),o=await a.json(),d=r(o);n||(s(o),e(d.initialNodes),t(d.initialEdges))})(),()=>{n=!0}},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(G,{})})}}},function(e){e.O(0,[241,797,987,775,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);